(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{211:function(e,t,a){"use strict";a(24)},212:function(e,t,a){(e.exports=a(4)(!1)).push([e.i,"[data-v-36608b10] .custom-modal{border-radius:15px}[data-v-36608b10] .ql-editor{min-height:180px!important}",""])},24:function(e,t,a){var o=a(212);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(5)(o,r);o.locals&&(e.exports=o.locals)},299:function(e,t,a){"use strict";a.r(t);var o=a(2),r=a(0),i=a.n(r);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l={name:"Modal",props:{formItem:{type:Object,default:function(){return{}}},modalType:{type:Number,default:0}},components:{},data:function(){return{modal:!0,form:{id:null,image_one:null,image_two:null,group_id:null,checked:1,date_time:i()().format("YYYY-MM-DD"),remark:null,section_id:null},url:null,imgUrl:"/images/session/",listItems:{},student_list:[],group_section:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({modalOk:function(){return 1==this.modalType?this.$t("save"):2==this.modalType?this.$t("update"):"".concat(this.$t("wait"),"...")}},Object(o.b)({positions:"getPosition",groups:"getGroup"})),watch:{modalType:{handler:function(e){1==e?(this.modal=!0,this.url="/session/store"):2==e&&(this.modal=!0,this.setData(),this.url="/session/edit")},immediate:!0}},methods:{onSubmit:function(){var e=this,t=this;this.$validator.validateAll().then((function(a){if(a){var o=new FormData;o.append("id",e.form.id),o.append("image_one",e.form.image_one),o.append("image_two",e.form.image_two),o.append("group_id",e.form.group_id),o.append("date_time",e.form.date_time),o.append("remark",e.form.remark),o.append("student_list",JSON.stringify(e.student_list)),axios.post(e.url,o).then((function(e){200===e.status&&(t.listItems=e.data.data,t.clearForm(),t.$notify({group:"message",type:"success",title:t.$t("session"),text:t.$t("done")}))})).catch((function(e){console.log(e)}))}else t.$notify({group:"message",type:"warning",title:t.$t("session"),text:t.$t("validation_failed")})}))},clearForm:function(){var e=this;this.form={},this.$nextTick((function(){e.$validator.reset()})),this.$emit("closeModal",this.listItems),this.modal=!1,this.listItems={}},setData:function(){this.form=Object.assign({},this.formItem),this.form.logo="/images/session/"+this.formItem.image,this.form.old_logo=this.formItem.image,this.student_list=this.formItem.attendance},previewFiles:function(){if(this.form.image_one=this.$refs.imageOne.files[0],"image/heic"==this.form.image_one.type)return alert("your iphone's camera is using .heic please change to .jpg file"),void(this.form.image_one=null);document.getElementById("image_one_img").src=window.URL.createObjectURL(this.form.image_one),document.getElementById("image_one_tab").href=window.URL.createObjectURL(this.form.image_one)},previewFilesTwo:function(){if(this.form.image_two=this.$refs.imageTwo.files[0],"image/heic"==this.form.image_two.type)return alert("your iphone's camera is using .heic please change to .jpg file"),void(this.form.image_two=null);document.getElementById("image_two").src=window.URL.createObjectURL(this.form.image_two),document.getElementById("image_two_tab").href=window.URL.createObjectURL(this.form.image_two)},getStudent:function(e){var t=this,a={group_id:e};axios.post("/student/getByGroupId",a).then((function(e){t.student_list=e.data.data,t.group_section=e.data.data[0].group_section})).catch((function(e){console.log(e)}))}}},m=(a(211),a(1)),c=Object(m.a)(l,(function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{id:"modal",scrollable:"",top:"","no-close-on-backdrop":"","no-close-on-esc":"","hide-header-close":"",size:"lg","content-class":"custom-modal"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[t("template",{slot:"modal-header"},[t("h3",[t("i",{staticClass:"fas fa-user-graduate"}),e._v(" "+e._s(e.$t("session")))])]),e._v(" "),t("b-row",[t("b-col",{attrs:{lg:"6",xl:"6",md:"6",sm:"6"}},[t("b-form-group",{staticClass:"text-left",attrs:{label:"Referent Image","label-class":"control-label"}},[t("input",{ref:"imageOne",attrs:{id:"image_one",type:"file"},on:{change:e.previewFiles}})]),e._v(" "),t("a",{directives:[{name:"show",rawName:"v-show",value:null!=e.form.image_one,expression:"form.image_one != null"}],attrs:{id:"image_one_tab",href:"#",target:"_blank"}},[t("img",{staticClass:"img-fluid",attrs:{id:"image_one_img",alt:"your image",width:"100",height:"150",onerror:"this.src='/image_error.png';"}})])],1),e._v(" "),t("b-col",{attrs:{lg:"6",xl:"6",md:"6",sm:"6"}},[t("b-form-group",{staticClass:"text-left",attrs:{label:"Referent Image","label-class":"control-label"}},[t("input",{ref:"imageTwo",attrs:{type:"file"},on:{change:e.previewFilesTwo}})]),e._v(" "),t("a",{directives:[{name:"show",rawName:"v-show",value:null!=e.form.image_two,expression:"form.image_two != null"}],attrs:{id:"image_two_tab",href:"#",target:"_blank"}},[t("img",{staticClass:"img-fluid",attrs:{id:"image_two",alt:"your image",width:"100",height:"150",onerror:"this.src='/image_error.png';"}})])],1),e._v(" "),t("b-col",{attrs:{lg:"12",xl:"12",md:"12",sm:"12"}},[t("b-form-group",{staticClass:"text-left",attrs:{"invalid-feedback":e.veeErrors.first("group_id"),label:e.$t("group"),"label-class":"control-label"}},[t("b-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{state:!e.veeErrors.has("group_id")&&null,"data-vv-name":"group_id","data-vv-as":e.$t("group")},on:{input:function(t){return e.getStudent(e.form.group_id)}},model:{value:e.form.group_id,callback:function(t){e.$set(e.form,"group_id",t)},expression:"form.group_id"}},[t("b-form-select-option",{attrs:{value:"null"}},[e._v(e._s(e.$t("group")))]),e._v(" "),e._l(e.groups,(function(a,o){return t("b-form-select-option",{key:"group_"+o,attrs:{value:a.id}},[e._v("\n            "+e._s(a.name)+"\n          ")])}))],2)],1)],1),e._v(" "),t("b-col",{attrs:{lg:"12",xl:"12",md:"12",sm:"12"}},[t("b-form-group",{attrs:{label:"Section"}},e._l(e.group_section,(function(a,o){return t("b-form-radio",{key:"group_section"+o,attrs:{name:"group-section",value:a.id},model:{value:e.form.section_id,callback:function(t){e.$set(e.form,"section_id",t)},expression:"form.section_id"}},[e._v("\n          "+e._s(a.name)+"\n        ")])})),1)],1),e._v(" "),t("b-col",{attrs:{lg:"12",xl:"12",md:"12",sm:"12"}},[t("b-form-group",{staticClass:"text-left",attrs:{size:"sm","invalid-feedback":e.veeErrors.first("date"),state:!e.veeErrors.has("date")&&null,label:e.$t("date")+" *","label-class":"control-label"}},[t("b-form-datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"reset-button":"","close-button":"","today-button":"",locale:"en",required:"",size:"sm","hide-header":"","date-format-options":{year:"numeric",month:"short",day:"2-digit"},state:!e.veeErrors.has("date")&&null,"data-vv-name":"date","data-vv-as":e.$t("date")},model:{value:e.form.date_time,callback:function(t){e.$set(e.form,"date_time",t)},expression:"form.date_time"}})],1)],1),e._v(" "),t("b-col",{attrs:{lg:"12",xl:"12",md:"12",sm:"12"}},[t("b-form-group",{staticClass:"text-left",attrs:{"invalid-feedback":e.veeErrors.first("remark"),label:e.$t("remark"),"label-class":"control-label"}},[t("b-textarea",{attrs:{autocomplete:"off",rows:"3",placeholder:e.$t("remark")},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),t("b-col",{attrs:{lg:"12",xl:"12",md:"12",sm:"12"}},[t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-sm table-striped"},[t("thead",[t("tr",[t("th",[e._v("No.")]),e._v(" "),t("th",[e._v("Name")]),e._v(" "),t("th",[e._v("Latin Name")]),e._v(" "),t("th",[e._v("Check")])])]),e._v(" "),t("tbody",e._l(e.student_list,(function(a,o){return t("tr",{key:"student_"+o},[t("td",[e._v(e._s(o+1))]),e._v(" "),t("td",[e._v(e._s(a.name))]),e._v(" "),t("td",[e._v(e._s(a.latin_name))]),e._v(" "),t("td",[t("b-form-checkbox",{attrs:{size:"lg",name:"checkbox-1",value:"1","unchecked-value":"0"},model:{value:a.checked,callback:function(t){e.$set(a,"checked",t)},expression:"item.checked"}},[e._v("\n                Present\n              ")])],1)])})),0)])])])],1),e._v(" "),t("template",{slot:"modal-footer"},[t("b-button",{staticClass:"float-right",attrs:{variant:"outline-danger"},on:{click:e.clearForm}},[t("i",{staticClass:"fas fa-times-circle mr-1"}),e._v("\n      "+e._s(e.$t("close"))+"\n    ")]),e._v(" "),t("b-button",{staticClass:"float-right ml-2",attrs:{type:"submit",variant:"outline-primary"},on:{click:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[1==e.modalType?t("i",{staticClass:"fas fa-save mr-1"}):e._e(),e._v(" "),2==e.modalType?t("i",{staticClass:"fa fa-edit mr-1"}):e._e(),e._v("\n      "+e._s(e.modalOk)+"\n    ")])],1)],2)}),[],!1,null,"36608b10",null);t.default=c.exports}}]);